# Blockchain

Blockchain microservice application using the clean architecture

## Overview
Abilities of applications:
- Authentication and authorization with jwt token
- Create user wallet with public and private keys
- Make transactions between wallets

## List of technologies used

* gin - Gin Web Framework
* postgresql - relational database management system
* gorm - ORM library for GO
* cleanenv - Go configuration
* redis - Caching
* Docker - Docker
* Prometheus - Collecting metrics
* Grafana - Displaying metrics in dashboard
* Swagger - API documentation
* Nats - message broker
* Jaeger - distributed tracing platform

## Quick start

```bash
#build the auth service
make docker-build-auth
#build the user service
make docker-build-user
#build the blockchain service
make docker-build-blockchain
#docker compose up
make compose-up
```

## Project structure
### `cmd/<service>/main.go`
Configuration and logger initialization. Then the main function "continues" in
`internal/<service>/app.go`.

### `config`
Configuration. First, `config.yml` is read,
The config structure is in the `config.go`.
For configuration, I chose the [cleanenv](https://github.com/ilyakaznacheev/cleanenv) library.
It does not have many stars on GitHub, but is simple and meets all the requirements.

### `docs`
Swagger documentation. Auto-generated by [swag](https://github.com/swaggo/swag) library.

### `internal/<service>/applicator`
There is always one _Run_ function in the `app.go` file, which "continues" the _main_ function.
This is where all the main objects are created.

### `internal/<service>/controller`
Server handler layer (MVC controllers).
- REST http (Gin framework)


Server routers are written in the same style:
- Handlers are grouped by area of application (by a common basis)
- For each group, its own router structure is created, the methods of which process paths
- The structure of the business logic is injected into the router structure, which will be called by the handlers
- 
### `internal/<service>/controller/http`
- Middleware needed for each service
- Data transfers objects (dto)
- Router and handlers


### `internal/<service>/entity`
Entities of business logic (models) can be used in any layer.

### `internal/<service>/metrics`
Collects custom metrics using prometheus

### `internal/<service>/transport`
GRPC transport to communicate between services

### `internal/<service>/usecase`
Business logic methods


#### `internal/<service>/usecase/repo`
A repository is an abstract storage (database) that business logic works with.

### `pkg/blockchain-logic`
A blockchain implementation, major logic of block, blockchain creation, transaction,
consensus algorithm(proof of work), wallet creation are written here

